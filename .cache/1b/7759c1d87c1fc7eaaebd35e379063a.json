{"id":"Wta7","dependencies":[{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/package.json","includedInParent":true,"mtime":1605999081707},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/.browserslistrc","includedInParent":true,"mtime":1605999081703},{"name":"monaco-editor/esm/vs/editor/editor.main.js","loc":{"line":2,"column":24},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/frontend_src/main.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/editor.main.js"}],"generated":{"js":"\"use strict\";var t,e,n=r(require(\"monaco-editor/esm/vs/editor/editor.main.js\"));function o(){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||\"object\"!=typeof t&&\"function\"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var l=r?Object.getOwnPropertyDescriptor(t,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}function i(t,e,n){t||(t=window.location.href);var o,r,i=document.createElement(\"a\"),l=new RegExp(e+\"((?:\\\\[[^\\\\]]*\\\\])?)(=|$)(.*)\"),c=!1;if(i.href=t,!i.search)return i.search=\"?\"+e+\"=\"+n,i.href;for(r=(o=i.search.replace(/^\\?/,\"\").split(/&(?:amp;)?/)).length;r>0;)o[--r]?l.test(o[r])&&(o[r]=o[r].replace(l,e+\"$1\")+\"=\"+n,c=!0):o.splice(r,1);return c||o.push(e+\"=\"+n),i.search=\"?\"+o.join(\"&\"),i.href}self.MonacoEnvironment={getWorkerUrl:function(t,e){return\"json\"===e?\"./json.worker.js\":\"css\"===e?\"./css.worker.js\":\"html\"===e?\"./html.worker.js\":\"typescript\"===e||\"javascript\"===e?\"./ts.worker.js\":\"./editor.worker.js\"}};var l=0,c=\"https://snippet-bin.herokuapp.com\";const a=\"script_direct\";window.set_dirty=function(){document.querySelectorAll(\".dirty_watcher\").forEach(t=>t.classList.add(\"dirty\")),document.getElementById(\"link\").textContent=\"Link to online script (you have unsaved changes)\"},window.clear_dirty=function(){document.querySelectorAll(\".dirty_watcher.dirty\").forEach(t=>t.classList.remove(\"dirty\")),link.textContent=\"Link to online script\"};var s={};function u(t){return t in s?Promise.resolve(s[t]):axios.get(t).then(e=>(s[t]=e,e))}function d(t,e,n){t&&u(c+\"/load_file/\"+t).then(o=>{if(b=t,l++,k(o.data.text),e){let t=document.getElementById(\"history\"),e=document.getElementById(\"history_data\");for(;e.firstChild;)e.removeChild(e.firstChild);o.data.history.forEach((t,n)=>{let o=document.createElement(\"option\");o.value=n,o.dataset.value=t,e.appendChild(o)}),t.max=o.data.history.length-1,t.value=0}let r=document.getElementById(\"link\");r.setAttribute(\"href\",i(window.location.href,a,b)),r.textContent=\"Link to online script\",clear_dirty(),null!=n&&n()}).catch(t=>{console.log(t)})}function p(){document.querySelectorAll(\".copying_watcher\").forEach(t=>t.classList.add(\"copying\")),document.getElementById(\"link\").select(),document.execCommand(\"copy\")}function f(){document.querySelectorAll(\".copying_watcher\").forEach(t=>t.classList.remove(\"copying\"))}window.load_revision=d,window.save=function(t){t.target.disabled=!0;const e=t.target.childNodes[2];e.textContent=\"Saving...\";const n=()=>{e.textContent=\"Save\",t.target.disabled=!1};axios.post(c+\"/save_file\",{text:x(),original_revision:b}).then(t=>{window.load_revision(t.data.revision,!0),n()}).catch(t=>{console.log(\"ERROR: \"+t.message),n()})};var m,h,w,v=null,g=null,y=!1,b=null;function _(t,e){function n(t){return String.fromCharCode(27)+t}if(12==e.charCodeAt(0)){var o=0+t.buffer.cursorY;if(o>0){o<=t.rows&&(t.write(n(\"[B\")),t.write(n(\"[J\")),t.write(n(\"[A\"))),t.write(n(\"[A\")),t.write(n(\"[K\")),t.write(n(\"[1J\"));for(var r=1;r<o;r++)t.write(n(\"[A\")),t.write(n(\"[M\"));t.write(n(\"[M\"))}return!1}return!0}function E(t){null!=h&&null!==h.contentWindow&&h.contentWindow.document.dispatchEvent(new MouseEvent(\"mouseup\"))}function C(t,e){var n=t.split(\"?\");if(n.length>=2){for(var o=encodeURIComponent(e)+\"=\",r=n[1].split(/[&;]/g),i=r.length;i-- >0;)-1!==r[i].lastIndexOf(o,0)&&r.splice(i,1);return n[0]+(r.length>0?\"?\"+r.join(\"&\"):\"\")}return t}function j(){}function x(){return m.getValue()}function k(t){m.setValue(t)}function L(){var t=window.location.href.indexOf(\"?\"),e=window.location.href.substr(0,-1==t?void 0:t).split(\"/\"),n=e.slice(0,e.length-2).join(\"/\");return console.log(n),n+=\"/lvgl.html\"}function S(n,o){var r=function(){console.log(\"Script passed: \"+y),runScript(),y=!1};if(o)v=null,b=n,window.load_revision(b,!0,function(){r()});else{Array.isArray(n)||(n=[{url:n}]);var i=v,l=function(){null!=i&&(v=i),alert(\"The URL you passed is invalid.\")};try{n.forEach(t=>{new URL(t.url)})}catch(c){return void l()}v=n[n.length-1].url,n.forEach(o=>{let i=new XMLHttpRequest;console.log(\"GET \"+o.url),i.overrideMimeType(\"text/plain\"),i.open(\"GET\",o.url,!0),i.send(null),i.onerror=l,i.onreadystatechange=function(){if(4===i.readyState)if(200==i.status){if(console.log(i.reponseText),void 0===i.responseText)return;o.content=i.responseText,t=n.reduce((t,e)=>t+(\"content\"in e),0),console.log(t+\" of \"+n.length+\" loaded\"),t==n.length&&(e=\"\",n.forEach(t=>{\"comment\"in t&&(e+=\"##### \"+t.comment+\" #####\\n\\n\"),e+=t.content+\"\\n\\n\"}),k(e),r())}else l()}})}}function A(t){var e=void 0;try{e=new URL(window.location.href).searchParams.get(t)}catch(n){console.log(n+\": URL seems to be unsupported\")}return e}function I(t){t.contentWindow.document.open(),t.contentWindow.document.write(\"\"),t.contentWindow.document.close()}function W(){const t=document.getElementById(\"editor\");t.textContent=\"\",m=n.editor.create(t,{value:\"\\n# Initialize \\n\\nimport imp, sys\\nsys.path.append('https://raw.githubusercontent.com/littlevgl/lv_binding_micropython/master/lib')\\nimport display_driver\\nimport lvgl as lv\\n\\n# Create a button with a label \\n\\nscr = lv.obj()\\nbtn = lv.btn(scr)\\nbtn.align(scr, lv.ALIGN.CENTER, 0, 0)\\nlabel = lv.label(btn)\\nlabel.set_text('Hello World!')\\nlv.scr_load(scr)\\n\",language:\"python\",automaticLayout:!1})}document.onmouseup=E,window.runScript=function(){$(\"#run-button\").prop(\"disabled\",\"disabled\"),w.write(\"\u001bc\"),document.getElementById(\"canvas\").getContext(\"2d\").clearRect(0,0,canvas.width,canvas.height),h.setAttribute(\"data-cscript\",LZString.compressToEncodedURIComponent(x())),I(h),h.src=L(),h.contentWindow.location.href=h.src,console.log(\"Iframe src: \"+h.src,\"top\",window.parent),w.setOption(\"disableStdin\",!0),w.write(\"Loading...\\r\")},window.reenableButton=function(){$(\"#run-button\").removeProp(\"disabled\"),null!=w&&null!=w&&w.setOption(\"disableStdin\",!1)},$(window).load(function(){$(document).on(\"shown.bs.tooltip\",function(t){setTimeout(function(){$(t.target).tooltip(\"hide\")},5e3)}),window.clear_dirty(),$('[data-toggle=\"tooltip\"]').tooltip(),W(),(h=document.getElementById(\"emscripten-iframe\")).src=\"about:blank\",h.contentWindow.location.href=h.src,I(h),Terminal.applyAddon(fit),w=new Terminal({tabStopWidth:8,cursorBlink:!0,cursorStyle:\"block\",applicationCursor:!0});var t=document.getElementById(\"mp_js_stdout\");t.value=\"\",w.open(t),w.fit(),w.on(\"data\",function(t,e){if(_(w,t))for(var n=0;n<t.length;n++)null!==h.contentWindow&&h.contentWindow.mp_js_process_char(t.charCodeAt(n))}),t.addEventListener(\"print\",function(t){var e=t.data;w.write(e)},!1),m.onDidChangeModelContent(()=>{l?l--:window.set_dirty()}),m.layout(),w.fit();var e=A(\"script\"),n=A(\"script_direct\"),o=A(\"script_startup\");null!=n?(y=!0,S(n,!0)):null!=o?null!=e?(y=!0,S([{comment:\"startup script\",url:o},{comment:\"main script\",url:e}])):(y=!0,S(o)):null!=e?(y=!0,S(e)):runScript()}),$(window).resize(function(){m.layout(),w.fit()});"},"sourceMaps":null,"error":null,"hash":"d44e43f6f85661951feffee34b0cd964","cacheData":{"env":{}}}