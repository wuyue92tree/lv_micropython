{"id":"TlmE","dependencies":[{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/package.json","includedInParent":true,"mtime":1606037244039},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/.browserslistrc","includedInParent":true,"mtime":1606037244035},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/package.json","includedInParent":true,"mtime":1606037425866},{"name":"../../../base/common/async.js","loc":{"line":27,"column":54},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorDetector.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/async.js"},{"name":"../../../base/common/color.js","loc":{"line":28,"column":21},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorDetector.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/color.js"},{"name":"../../../base/common/errors.js","loc":{"line":29,"column":34},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorDetector.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/errors.js"},{"name":"../../../base/common/hash.js","loc":{"line":30,"column":21},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorDetector.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/hash.js"},{"name":"../../../base/common/lifecycle.js","loc":{"line":31,"column":44},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorDetector.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/lifecycle.js"},{"name":"../../browser/editorExtensions.js","loc":{"line":32,"column":43},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorDetector.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/editorExtensions.js"},{"name":"../../browser/services/codeEditorService.js","loc":{"line":33,"column":35},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorDetector.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/services/codeEditorService.js"},{"name":"../../common/core/range.js","loc":{"line":34,"column":22},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorDetector.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/core/range.js"},{"name":"../../common/model/textModel.js","loc":{"line":35,"column":39},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorDetector.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model/textModel.js"},{"name":"../../common/modes.js","loc":{"line":36,"column":38},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorDetector.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/modes.js"},{"name":"./color.js","loc":{"line":37,"column":26},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorDetector.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/color.js"},{"name":"../../../platform/configuration/common/configuration.js","loc":{"line":38,"column":38},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorDetector.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/platform/configuration/common/configuration.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.ColorDetector=void 0;var e=require(\"../../../base/common/async.js\"),o=require(\"../../../base/common/color.js\"),t=require(\"../../../base/common/errors.js\"),r=require(\"../../../base/common/hash.js\"),n=require(\"../../../base/common/lifecycle.js\"),i=require(\"../../browser/editorExtensions.js\"),s=require(\"../../browser/services/codeEditorService.js\"),a=require(\"../../common/core/range.js\"),c=require(\"../../common/model/textModel.js\"),l=require(\"../../common/modes.js\"),u=require(\"./color.js\"),d=require(\"../../../platform/configuration/common/configuration.js\"),m=function(){var e=function(o,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,o){e.__proto__=o}||function(e,o){for(var t in o)o.hasOwnProperty(t)&&(e[t]=o[t])})(o,t)};return function(o,t){function r(){this.constructor=o}e(o,t),o.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),h=function(e,o,t,r){var n,i=arguments.length,s=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,t):r;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,o,t,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(o,t,s):n(o,t))||s);return i>3&&s&&Object.defineProperty(o,t,s),s},p=function(e,o){return function(t,r){o(t,r,e)}},_=500,f=function(i){function f(e,o,t){var r=i.call(this)||this;return r._editor=e,r._codeEditorService=o,r._configurationService=t,r._localToDispose=r._register(new n.DisposableStore),r._decorationsIds=[],r._colorDatas=new Map,r._colorDecoratorIds=[],r._decorationsTypes=new Set,r._register(e.onDidChangeModel(function(e){r._isEnabled=r.isEnabled(),r.onModelChanged()})),r._register(e.onDidChangeModelLanguage(function(e){return r.onModelChanged()})),r._register(l.ColorProviderRegistry.onDidChange(function(e){return r.onModelChanged()})),r._register(e.onDidChangeConfiguration(function(e){var o=r._isEnabled;r._isEnabled=r.isEnabled(),o!==r._isEnabled&&(r._isEnabled?r.onModelChanged():r.removeAllDecorations())})),r._timeoutTimer=null,r._computePromise=null,r._isEnabled=r.isEnabled(),r.onModelChanged(),r}return m(f,i),f.prototype.isEnabled=function(){var e=this._editor.getModel();if(!e)return!1;var o=e.getLanguageIdentifier(),t=this._configurationService.getValue(o.language);if(t){var r=t.colorDecorators;if(r&&void 0!==r.enable&&!r.enable)return r.enable}return this._editor.getOption(12)},f.get=function(e){return e.getContribution(this.ID)},f.prototype.dispose=function(){this.stop(),this.removeAllDecorations(),i.prototype.dispose.call(this)},f.prototype.onModelChanged=function(){var o=this;if(this.stop(),this._isEnabled){var t=this._editor.getModel();t&&l.ColorProviderRegistry.has(t)&&(this._localToDispose.add(this._editor.onDidChangeModelContent(function(t){o._timeoutTimer||(o._timeoutTimer=new e.TimeoutTimer,o._timeoutTimer.cancelAndSet(function(){o._timeoutTimer=null,o.beginCompute()},f.RECOMPUTE_TIME))})),this.beginCompute())}},f.prototype.beginCompute=function(){var o=this;this._computePromise=(0,e.createCancelablePromise)(function(e){var t=o._editor.getModel();return t?(0,u.getColors)(t,e):Promise.resolve([])}),this._computePromise.then(function(e){o.updateDecorations(e),o.updateColorDecorators(e),o._computePromise=null},t.onUnexpectedError)},f.prototype.stop=function(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()},f.prototype.updateDecorations=function(e){var o=this,t=e.map(function(e){return{range:{startLineNumber:e.colorInfo.range.startLineNumber,startColumn:e.colorInfo.range.startColumn,endLineNumber:e.colorInfo.range.endLineNumber,endColumn:e.colorInfo.range.endColumn},options:c.ModelDecorationOptions.EMPTY}});this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach(function(t,r){return o._colorDatas.set(t,e[r])})},f.prototype.updateColorDecorators=function(e){for(var t=this,n=[],i={},s=0;s<e.length&&n.length<_;s++){var a=e[s].colorInfo.color,c=a.red,l=a.green,u=a.blue,d=a.alpha,m=new o.RGBA(Math.round(255*c),Math.round(255*l),Math.round(255*u),d),h=(0,r.hash)(m).toString(16),p=\"rgba(\"+m.r+\", \"+m.g+\", \"+m.b+\", \"+m.a+\")\",f=\"colorBox-\"+h;this._decorationsTypes.has(f)||i[f]||this._codeEditorService.registerDecorationType(f,{before:{contentText:\" \",border:\"solid 0.1em #000\",margin:\"0.1em 0.2em 0 0.2em\",width:\"0.8em\",height:\"0.8em\",backgroundColor:p},dark:{before:{border:\"solid 0.1em #eee\"}}}),i[f]=!0,n.push({range:{startLineNumber:e[s].colorInfo.range.startLineNumber,startColumn:e[s].colorInfo.range.startColumn,endLineNumber:e[s].colorInfo.range.endLineNumber,endColumn:e[s].colorInfo.range.endColumn},options:this._codeEditorService.resolveDecorationOptions(f,!0)})}this._decorationsTypes.forEach(function(e){i[e]||t._codeEditorService.removeDecorationType(e)}),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,n)},f.prototype.removeAllDecorations=function(){var e=this;this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,[]),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,[]),this._decorationsTypes.forEach(function(o){e._codeEditorService.removeDecorationType(o)})},f.prototype.getColorData=function(e){var o=this,t=this._editor.getModel();if(!t)return null;var r=t.getDecorationsInRange(a.Range.fromPositions(e,e)).filter(function(e){return o._colorDatas.has(e.id)});return 0===r.length?null:this._colorDatas.get(r[0].id)},f.ID=\"editor.contrib.colorDetector\",f.RECOMPUTE_TIME=1e3,f=h([p(1,s.ICodeEditorService),p(2,d.IConfigurationService)],f)}(n.Disposable);exports.ColorDetector=f,(0,i.registerEditorContribution)(f.ID,f);"},"sourceMaps":null,"error":null,"hash":"a4ae8e2b9c4075886fff9feaf9c6d0ec","cacheData":{"env":{}}}