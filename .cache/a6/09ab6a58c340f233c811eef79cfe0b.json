{"id":"ymya","dependencies":[{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/package.json","includedInParent":true,"mtime":1605994915815},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/.browserslistrc","includedInParent":true,"mtime":1605994915739},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/package.json","includedInParent":true,"mtime":1605995102295},{"name":"./minimap.css","loc":{"line":18,"column":7},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimap.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimap.css"},{"name":"../../../../base/browser/dom.js","loc":{"line":19,"column":21},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimap.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/browser/dom.js"},{"name":"../../../../base/browser/fastDomNode.js","loc":{"line":20,"column":34},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimap.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/browser/fastDomNode.js"},{"name":"../../../../base/browser/globalMouseMoveMonitor.js","loc":{"line":21,"column":64},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimap.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/browser/globalMouseMoveMonitor.js"},{"name":"../../../../base/common/platform.js","loc":{"line":22,"column":26},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimap.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/platform.js"},{"name":"../../../../base/common/strings.js","loc":{"line":23,"column":25},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimap.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/strings.js"},{"name":"../../view/viewLayer.js","loc":{"line":24,"column":40},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimap.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/view/viewLayer.js"},{"name":"../../view/viewPart.js","loc":{"line":25,"column":43},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimap.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/view/viewPart.js"},{"name":"../../../common/config/editorOptions.js","loc":{"line":26,"column":37},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimap.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/config/editorOptions.js"},{"name":"../../../common/core/range.js","loc":{"line":27,"column":22},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimap.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/core/range.js"},{"name":"../../../common/viewModel/minimapTokensColorTracker.js","loc":{"line":28,"column":42},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimap.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/viewModel/minimapTokensColorTracker.js"},{"name":"../../../common/view/viewEvents.js","loc":{"line":29,"column":28},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimap.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/view/viewEvents.js"},{"name":"../../../../platform/theme/common/colorRegistry.js","loc":{"line":30,"column":142},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimap.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/platform/theme/common/colorRegistry.js"},{"name":"../../../../platform/theme/common/themeService.js","loc":{"line":31,"column":43},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimap.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/platform/theme/common/themeService.js"},{"name":"../../../../base/browser/touch.js","loc":{"line":32,"column":35},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimap.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/browser/touch.js"},{"name":"./minimapCharRendererFactory.js","loc":{"line":33,"column":43},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimap.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimapCharRendererFactory.js"},{"name":"../../../common/model.js","loc":{"line":34,"column":32},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimap.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/model.js"},{"name":"../../../../base/common/functional.js","loc":{"line":35,"column":21},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/minimap/minimap.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/functional.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.Minimap=void 0,require(\"./minimap.css\");var e=v(require(\"../../../../base/browser/dom.js\")),t=require(\"../../../../base/browser/fastDomNode.js\"),i=require(\"../../../../base/browser/globalMouseMoveMonitor.js\"),n=v(require(\"../../../../base/common/platform.js\")),o=v(require(\"../../../../base/common/strings.js\")),r=require(\"../../view/viewLayer.js\"),s=require(\"../../view/viewPart.js\"),a=require(\"../../../common/config/editorOptions.js\"),d=require(\"../../../common/core/range.js\"),l=require(\"../../../common/viewModel/minimapTokensColorTracker.js\"),h=v(require(\"../../../common/view/viewEvents.js\")),c=require(\"../../../../platform/theme/common/colorRegistry.js\"),u=require(\"../../../../platform/theme/common/themeService.js\"),p=require(\"../../../../base/browser/touch.js\"),m=require(\"./minimapCharRendererFactory.js\"),_=require(\"../../../common/model.js\"),f=require(\"../../../../base/common/functional.js\");function g(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return g=function(){return e},e}function v(e){if(e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var t=g();if(t&&t.has(e))return t.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=n?Object.getOwnPropertyDescriptor(e,o):null;r&&(r.get||r.set)?Object.defineProperty(i,o,r):i[o]=e[o]}return i.default=e,t&&t.set(e,i),i}var L=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function y(e,t){return 1===e?2*t:3*t}function D(e,t){return 1*t}var N=140,C=2,b=function(){function e(e){var t=this,i=e.options,n=i.get(101),o=i.get(103),r=i.get(32);this.renderMinimap=0|o.renderMinimap,this.scrollBeyondLastLine=i.get(76);var s=i.get(52);this.showSlider=s.showSlider,this.fontScale=Math.round(s.scale*n),this.charRenderer=(0,f.once)(function(){return m.MinimapCharRendererFactory.create(t.fontScale,r.fontFamily)}),this.pixelRatio=n,this.typicalHalfwidthCharacterWidth=r.typicalHalfwidthCharacterWidth,this.lineHeight=i.get(47),this.minimapLeft=o.minimapLeft,this.minimapWidth=o.minimapWidth,this.minimapHeight=o.height,this.canvasInnerWidth=Math.max(1,Math.floor(n*this.minimapWidth)),this.canvasInnerHeight=Math.max(1,Math.floor(n*this.minimapHeight)),this.canvasOuterWidth=this.canvasInnerWidth/n,this.canvasOuterHeight=this.canvasInnerHeight/n}return e.prototype.equals=function(e){return this.renderMinimap===e.renderMinimap&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.showSlider===e.showSlider&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.fontScale===e.fontScale&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight},e}(),w=function(){function e(e,t,i,n,o,r,s){this.scrollTop=e,this.scrollHeight=t,this._computedSliderRatio=i,this.sliderTop=n,this.sliderHeight=o,this.startLineNumber=r,this.endLineNumber=s}return e.prototype.getDesiredScrollTopFromDelta=function(e){var t=this.sliderTop+e;return Math.round(t/this._computedSliderRatio)},e.prototype.getDesiredScrollTopFromTouchLocation=function(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)},e.create=function(t,i,n,o,r,s,a,d,l){var h,c,u=t.pixelRatio,p=y(t.renderMinimap,t.fontScale),m=Math.floor(t.canvasInnerHeight/p),_=t.lineHeight;if(r&&n!==s){var f=n-i+1;h=Math.floor(f*p/u)}else{var g=o/_;h=Math.floor(g*p/u)}c=t.scrollBeyondLastLine?(s-1)*p/u:Math.max(0,s*p/u-h);var v=(c=Math.min(t.minimapHeight-h,c))/(d-o),L=a*v,D=0;t.scrollBeyondLastLine&&(D=g=o/_);if(m>=s+D)return new e(a,d,v,L,h,N=1,s);var N=Math.max(1,Math.floor(i-L*u/p));return l&&l.scrollHeight===d&&(l.scrollTop>a&&(N=Math.min(N,l.startLineNumber)),l.scrollTop<a&&(N=Math.max(N,l.startLineNumber))),new e(a,d,v,L,h,N,Math.min(s,N+m-1))},e}(),M=function(){function e(e){this.dy=e}return e.prototype.onContentChanged=function(){this.dy=-1},e.prototype.onTokensChanged=function(){this.dy=-1},e.INVALID=new e(-1),e}(),H=function(){function e(e,t,i){this.renderedLayout=e,this._imageData=t,this._renderedLines=new r.RenderedLinesCollection(function(){return M.INVALID}),this._renderedLines._set(e.startLineNumber,i)}return e.prototype.linesEquals=function(e){if(!this.scrollEquals(e))return!1;for(var t=this._renderedLines._get().lines,i=0,n=t.length;i<n;i++)if(-1===t[i].dy)return!1;return!0},e.prototype.scrollEquals=function(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber},e.prototype._get=function(){var e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}},e.prototype.onLinesChanged=function(e){return this._renderedLines.onLinesChanged(e.fromLineNumber,e.toLineNumber)},e.prototype.onLinesDeleted=function(e){this._renderedLines.onLinesDeleted(e.fromLineNumber,e.toLineNumber)},e.prototype.onLinesInserted=function(e){this._renderedLines.onLinesInserted(e.fromLineNumber,e.toLineNumber)},e.prototype.onTokensChanged=function(e){return this._renderedLines.onTokensChanged(e.ranges)},e}(),R=function(){function e(t,i,n,o){this._backgroundFillData=e._createBackgroundFillData(i,n,o),this._buffers=[t.createImageData(i,n),t.createImageData(i,n)],this._lastUsedBuffer=0}return e.prototype.getBuffer=function(){this._lastUsedBuffer=1-this._lastUsedBuffer;var e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e},e._createBackgroundFillData=function(e,t,i){for(var n=i.r,o=i.g,r=i.b,s=new Uint8ClampedArray(e*t*4),a=0,d=0;d<t;d++)for(var l=0;l<e;l++)s[a]=n,s[a+1]=o,s[a+2]=r,s[a+3]=255,a+=4;return s},e}(),T=function(r){function u(o){var a=r.call(this,o)||this;return a._selections=[],a._renderDecorations=!1,a._gestureInProgress=!1,a._options=new b(a._context.configuration),a._lastRenderData=null,a._buffers=null,a._selectionColor=a._context.theme.getColor(c.minimapSelection),a._domNode=(0,t.createFastDomNode)(document.createElement(\"div\")),s.PartFingerprints.write(a._domNode,8),a._domNode.setClassName(a._getMinimapDomNodeClassName()),a._domNode.setPosition(\"absolute\"),a._domNode.setAttribute(\"role\",\"presentation\"),a._domNode.setAttribute(\"aria-hidden\",\"true\"),a._shadow=(0,t.createFastDomNode)(document.createElement(\"div\")),a._shadow.setClassName(\"minimap-shadow-hidden\"),a._domNode.appendChild(a._shadow),a._canvas=(0,t.createFastDomNode)(document.createElement(\"canvas\")),a._canvas.setPosition(\"absolute\"),a._canvas.setLeft(0),a._domNode.appendChild(a._canvas),a._decorationsCanvas=(0,t.createFastDomNode)(document.createElement(\"canvas\")),a._decorationsCanvas.setPosition(\"absolute\"),a._decorationsCanvas.setClassName(\"minimap-decorations-layer\"),a._decorationsCanvas.setLeft(0),a._domNode.appendChild(a._decorationsCanvas),a._slider=(0,t.createFastDomNode)(document.createElement(\"div\")),a._slider.setPosition(\"absolute\"),a._slider.setClassName(\"minimap-slider\"),a._slider.setLayerHinting(!0),a._slider.setContain(\"strict\"),a._domNode.appendChild(a._slider),a._sliderHorizontal=(0,t.createFastDomNode)(document.createElement(\"div\")),a._sliderHorizontal.setPosition(\"absolute\"),a._sliderHorizontal.setClassName(\"minimap-slider-horizontal\"),a._slider.appendChild(a._sliderHorizontal),a._tokensColorTracker=l.MinimapTokensColorTracker.getInstance(),a._applyLayout(),a._mouseDownListener=e.addStandardDisposableListener(a._domNode.domNode,\"mousedown\",function(e){e.preventDefault();var t=a._options.renderMinimap;if(0!==t&&a._lastRenderData){var i=y(t,a._options.fontScale),n=a._options.pixelRatio*e.browserEvent.offsetY,o=Math.floor(n/i)+a._lastRenderData.renderedLayout.startLineNumber;o=Math.min(o,a._context.model.getLineCount()),a._context.privateViewEventBus.emit(new h.ViewRevealRangeRequestEvent(\"mouse\",new d.Range(o,1,o,1),1,!1,0))}}),a._sliderMouseMoveMonitor=new i.GlobalMouseMoveMonitor,a._sliderMouseDownListener=e.addStandardDisposableListener(a._slider.domNode,\"mousedown\",function(e){if(e.preventDefault(),e.stopPropagation(),e.leftButton&&a._lastRenderData){var t=e.posy,o=e.posx,r=a._lastRenderData.renderedLayout;a._slider.toggleClassName(\"active\",!0),a._sliderMouseMoveMonitor.startMonitoring(i.standardMouseMoveMerger,function(e){var i=Math.abs(e.posx-o);if(n.isWindows&&i>N)a._context.viewLayout.setScrollPositionNow({scrollTop:r.scrollTop});else{var s=e.posy-t;a._context.viewLayout.setScrollPositionNow({scrollTop:r.getDesiredScrollTopFromDelta(s)})}},function(){a._slider.toggleClassName(\"active\",!1)})}}),a._gestureDisposable=p.Gesture.addTarget(a._domNode.domNode),a._sliderTouchStartListener=e.addDisposableListener(a._domNode.domNode,p.EventType.Start,function(e){e.preventDefault(),e.stopPropagation(),a._lastRenderData&&(a._slider.toggleClassName(\"active\",!0),a._gestureInProgress=!0,a.scrollDueToTouchEvent(e))}),a._sliderTouchMoveListener=e.addStandardDisposableListener(a._domNode.domNode,p.EventType.Change,function(e){e.preventDefault(),e.stopPropagation(),a._lastRenderData&&a._gestureInProgress&&a.scrollDueToTouchEvent(e)}),a._sliderTouchEndListener=e.addStandardDisposableListener(a._domNode.domNode,p.EventType.End,function(e){e.preventDefault(),e.stopPropagation(),a._gestureInProgress=!1,a._slider.toggleClassName(\"active\",!1)}),a}return L(u,r),u.prototype.scrollDueToTouchEvent=function(e){var t=this._domNode.domNode.getBoundingClientRect().top,i=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._context.viewLayout.setScrollPositionNow({scrollTop:i})},u.prototype.dispose=function(){this._mouseDownListener.dispose(),this._sliderMouseMoveMonitor.dispose(),this._sliderMouseDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),r.prototype.dispose.call(this)},u.prototype._getMinimapDomNodeClassName=function(){return\"always\"===this._options.showSlider?\"minimap slider-always\":\"minimap slider-mouseover\"},u.prototype.getDomNode=function(){return this._domNode},u.prototype._applyLayout=function(){this._domNode.setLeft(this._options.minimapLeft),this._domNode.setWidth(this._options.minimapWidth),this._domNode.setHeight(this._options.minimapHeight),this._shadow.setHeight(this._options.minimapHeight),this._canvas.setWidth(this._options.canvasOuterWidth),this._canvas.setHeight(this._options.canvasOuterHeight),this._canvas.domNode.width=this._options.canvasInnerWidth,this._canvas.domNode.height=this._options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._options.canvasInnerHeight,this._slider.setWidth(this._options.minimapWidth)},u.prototype._getBuffer=function(){return this._buffers||(this._buffers=new R(this._canvas.domNode.getContext(\"2d\"),this._options.canvasInnerWidth,this._options.canvasInnerHeight,this._tokensColorTracker.getColor(2))),this._buffers.getBuffer()},u.prototype._onOptionsMaybeChanged=function(){var e=new b(this._context.configuration);return!this._options.equals(e)&&(this._options=e,this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName()),!0)},u.prototype.onConfigurationChanged=function(e){return this._onOptionsMaybeChanged()},u.prototype.onCursorStateChanged=function(e){return this._selections=e.selections,this._renderDecorations=!0,!0},u.prototype.onFlushed=function(e){return this._lastRenderData=null,!0},u.prototype.onLinesChanged=function(e){return!!this._lastRenderData&&this._lastRenderData.onLinesChanged(e)},u.prototype.onLinesDeleted=function(e){return this._lastRenderData&&this._lastRenderData.onLinesDeleted(e),!0},u.prototype.onLinesInserted=function(e){return this._lastRenderData&&this._lastRenderData.onLinesInserted(e),!0},u.prototype.onScrollChanged=function(e){return this._renderDecorations=!0,!0},u.prototype.onTokensChanged=function(e){return!!this._lastRenderData&&this._lastRenderData.onTokensChanged(e)},u.prototype.onTokensColorsChanged=function(e){return this._lastRenderData=null,this._buffers=null,!0},u.prototype.onZonesChanged=function(e){return this._lastRenderData=null,!0},u.prototype.onDecorationsChanged=function(e){return this._renderDecorations=!0,!0},u.prototype.onThemeChanged=function(e){return this._context.model.invalidateMinimapColorCache(),this._selectionColor=this._context.theme.getColor(c.minimapSelection),this._renderDecorations=!0,!0},u.prototype.prepareRender=function(e){},u.prototype.render=function(e){if(0===this._options.renderMinimap)return this._shadow.setClassName(\"minimap-shadow-hidden\"),this._sliderHorizontal.setWidth(0),void this._sliderHorizontal.setHeight(0);e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName(\"minimap-shadow-hidden\"):this._shadow.setClassName(\"minimap-shadow-visible\");var t=w.create(this._options,e.visibleRange.startLineNumber,e.visibleRange.endLineNumber,e.viewportHeight,e.viewportData.whitespaceViewportData.length>0,this._context.model.getLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setTop(t.sliderTop),this._slider.setHeight(t.sliderHeight);var i=e.scrollLeft/this._options.typicalHalfwidthCharacterWidth,n=Math.min(this._options.minimapWidth,Math.round(i*D(this._options.renderMinimap,this._options.fontScale)/this._options.pixelRatio));this._sliderHorizontal.setLeft(n),this._sliderHorizontal.setWidth(this._options.minimapWidth-n),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(t.sliderHeight),this.renderDecorations(t),this._lastRenderData=this.renderLines(t)},u.prototype.renderDecorations=function(e){if(this._renderDecorations){this._renderDecorations=!1;var t=this._context.model.getDecorationsInViewport(new d.Range(e.startLineNumber,1,e.endLineNumber,this._context.model.getLineMaxColumn(e.endLineNumber))),i=this._options,n=i.renderMinimap,o=i.canvasInnerWidth,r=i.canvasInnerHeight,s=y(n,this._options.fontScale),a=D(n,this._options.fontScale),l=this._context.model.getOptions().tabSize,h=this._decorationsCanvas.domNode.getContext(\"2d\");h.clearRect(0,0,o,r);for(var c=new Map,u=0;u<this._selections.length;u++)for(var p=this._selections[u],m=p.startLineNumber;m<=p.endLineNumber;m++)this.renderDecorationOnLine(h,c,p,this._selectionColor,e,m,s,s,l,a);for(u=0;u<t.length;u++){var f=t[u];if(f.options.minimap){var g=f.options.minimap.getColor(this._context.theme);for(m=f.range.startLineNumber;m<=f.range.endLineNumber;m++)switch(f.options.minimap.position){case _.MinimapPosition.Inline:this.renderDecorationOnLine(h,c,f.range,g,e,m,s,s,l,a);continue;case _.MinimapPosition.Gutter:var v=(m-e.startLineNumber)*s;this.renderDecoration(h,g,2,v,C,s);continue}}}}},u.prototype.renderDecorationOnLine=function(e,t,i,n,r,s,d,l,h,c){var u=(s-r.startLineNumber)*l;if(!(u+d<0||u>this._options.canvasOuterHeight)){var p=t.get(s),m=!p;if(!p){var _=this._context.model.getLineContent(s);p=[a.MINIMAP_GUTTER_WIDTH];for(var f=1;f<_.length+1;f++){var g=_.charCodeAt(f-1),v=9===g?h*c:o.isFullWidthCharacter(g)?2*c:c;p[f]=p[f-1]+v}t.set(s,p)}var L=i.startColumn,y=i.endColumn,D=i.startLineNumber,N=i.endLineNumber,C=D===s?p[L-1]:a.MINIMAP_GUTTER_WIDTH,b=N>s?p.length-1:y-1;if(b>0){var w=p[b]-C||2;this.renderDecoration(e,n,C,u,w,d)}m&&this.renderLineHighlight(e,n,u,d)}},u.prototype.renderLineHighlight=function(e,t,i,n){e.fillStyle=t&&t.transparent(.5).toString()||\"\",e.fillRect(a.MINIMAP_GUTTER_WIDTH,i,e.canvas.width,n)},u.prototype.renderDecoration=function(e,t,i,n,o,r){e.fillStyle=t&&t.toString()||\"\",e.fillRect(i,n,o,r)},u.prototype.renderLines=function(e){var t=this._options.renderMinimap,i=this._options.charRenderer(),n=e.startLineNumber,o=e.endLineNumber,r=y(t,this._options.fontScale);if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){var s=this._lastRenderData._get();return new H(e,s.imageData,s.lines)}for(var a=this._getBuffer(),d=u._renderUntouchedLines(a,n,o,r,this._lastRenderData),l=d[0],h=d[1],c=d[2],p=this._context.model.getMinimapLinesRenderingData(n,o,c),m=p.tabSize,_=this._tokensColorTracker.getColor(2),f=this._tokensColorTracker.backgroundIsLight(),g=0,v=[],L=0,D=o-n+1;L<D;L++)c[L]&&u._renderLine(a,_,f,t,this._tokensColorTracker,i,g,m,p.data[L],this._options.fontScale),v[L]=new M(g),g+=r;var N=-1===l?0:l,C=(-1===h?a.height:h)-N;return this._canvas.domNode.getContext(\"2d\").putImageData(a,0,0,0,N,a.width,C),new H(e,a,v)},u._renderUntouchedLines=function(e,t,i,n,o){var r=[];if(!o){for(var s=0,a=i-t+1;s<a;s++)r[s]=!0;return[-1,-1,r]}for(var d=o._get(),l=d.imageData.data,h=d.rendLineNumberStart,c=d.lines,u=c.length,p=e.width,m=e.data,_=(i-t+1)*n*p*4,f=-1,g=-1,v=-1,L=-1,y=-1,D=-1,N=0,C=t;C<=i;C++){var b=C-t,w=C-h,M=w>=0&&w<u?c[w].dy:-1;if(-1!==M){var H=M*p*4,R=(M+n)*p*4,T=N*p*4,S=(N+n)*p*4;L===H&&D===T?(L=R,D=S):(-1!==v&&(m.set(l.subarray(v,L),y),-1===f&&0===v&&v===y&&(f=L),-1===g&&L===_&&v===y&&(g=v)),v=H,L=R,y=T,D=S),r[b]=!1,N+=n}else r[b]=!0,N+=n}return-1!==v&&(m.set(l.subarray(v,L),y),-1===f&&0===v&&v===y&&(f=L),-1===g&&L===_&&v===y&&(g=v)),[-1===f?-1:f/(4*p),-1===g?-1:g/(4*p),r]},u._renderLine=function(e,t,i,n,r,s,d,l,h,c){for(var u=h.content,p=h.tokens,m=D(n,c),_=e.width-m,f=a.MINIMAP_GUTTER_WIDTH,g=0,v=0,L=0,y=p.getCount();L<y;L++)for(var N=p.getEndOffset(L),C=p.getForeground(L),b=r.getColor(C);g<N;g++){if(f>_)return;var w=u.charCodeAt(g);if(9===w){var M=l-(g+v)%l;v+=M-1,f+=M*m}else if(32===w)f+=m;else for(var H=o.isFullWidthCharacter(w)?2:1,R=0;R<H;R++)if(2===n?s.blockRenderChar(e,f,d,b,t,i):s.renderChar(e,f,d,w,b,t,c,i),(f+=m)>_)return}},u}(s.ViewPart);exports.Minimap=T,(0,u.registerThemingParticipant)(function(e,t){var i=e.getColor(c.scrollbarSliderBackground);if(i){var n=i.transparent(.5);t.addRule(\".monaco-editor .minimap-slider, .monaco-editor .minimap-slider .minimap-slider-horizontal { background: \"+n+\"; }\")}var o=e.getColor(c.scrollbarSliderHoverBackground);if(o){var r=o.transparent(.5);t.addRule(\".monaco-editor .minimap-slider:hover, .monaco-editor .minimap-slider:hover .minimap-slider-horizontal { background: \"+r+\"; }\")}var s=e.getColor(c.scrollbarSliderActiveBackground);if(s){var a=s.transparent(.5);t.addRule(\".monaco-editor .minimap-slider.active, .monaco-editor .minimap-slider.active .minimap-slider-horizontal { background: \"+a+\"; }\")}var d=e.getColor(c.scrollbarShadow);d&&t.addRule(\".monaco-editor .minimap-shadow-visible { box-shadow: \"+d+\" -6px 0 6px -6px inset; }\")});"},"sourceMaps":null,"error":null,"hash":"cbb12fa5182fabcb820eeff5e77895c6","cacheData":{"env":{}}}