{"id":"LuqV","dependencies":[{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/package.json","includedInParent":true,"mtime":1605999081707},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/.browserslistrc","includedInParent":true,"mtime":1605999081703},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/package.json","includedInParent":true,"mtime":1605999259245},{"name":"../../../base/common/async.js","loc":{"line":5,"column":58},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/hover/hoverOperation.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/async.js"},{"name":"../../../base/common/errors.js","loc":{"line":6,"column":34},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/hover/hoverOperation.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/errors.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.HoverOperation=void 0;var t=require(\"../../../base/common/async.js\"),e=require(\"../../../base/common/errors.js\"),s=function(){function s(e,s,o,i,n){var r=this;this._computer=e,this._state=0,this._hoverTime=n,this._firstWaitScheduler=new t.RunOnceScheduler(function(){return r._triggerAsyncComputation()},0),this._secondWaitScheduler=new t.RunOnceScheduler(function(){return r._triggerSyncComputation()},0),this._loadingMessageScheduler=new t.RunOnceScheduler(function(){return r._showLoadingMessage()},0),this._asyncComputationPromise=null,this._asyncComputationPromiseDone=!1,this._completeCallback=s,this._errorCallback=o,this._progressCallback=i}return s.prototype.setHoverTime=function(t){this._hoverTime=t},s.prototype._firstWaitTime=function(){return this._hoverTime/2},s.prototype._secondWaitTime=function(){return this._hoverTime/2},s.prototype._loadingMessageTime=function(){return 3*this._hoverTime},s.prototype._triggerAsyncComputation=function(){var e=this;this._state=2,this._secondWaitScheduler.schedule(this._secondWaitTime()),this._computer.computeAsync?(this._asyncComputationPromiseDone=!1,this._asyncComputationPromise=(0,t.createCancelablePromise)(function(t){return e._computer.computeAsync(t)}),this._asyncComputationPromise.then(function(t){e._asyncComputationPromiseDone=!0,e._withAsyncResult(t)},function(t){return e._onError(t)})):this._asyncComputationPromiseDone=!0},s.prototype._triggerSyncComputation=function(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncComputationPromiseDone?(this._state=0,this._onComplete(this._computer.getResult())):(this._state=3,this._onProgress(this._computer.getResult()))},s.prototype._showLoadingMessage=function(){3===this._state&&this._onProgress(this._computer.getResultWithLoadingMessage())},s.prototype._withAsyncResult=function(t){t&&this._computer.onResult(t,!1),3===this._state&&(this._state=0,this._onComplete(this._computer.getResult()))},s.prototype._onComplete=function(t){this._completeCallback&&this._completeCallback(t)},s.prototype._onError=function(t){this._errorCallback?this._errorCallback(t):(0,e.onUnexpectedError)(t)},s.prototype._onProgress=function(t){this._progressCallback&&this._progressCallback(t)},s.prototype.start=function(t){if(0===t)0===this._state&&(this._state=1,this._firstWaitScheduler.schedule(this._firstWaitTime()),this._loadingMessageScheduler.schedule(this._loadingMessageTime()));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation()}},s.prototype.cancel=function(){this._loadingMessageScheduler.cancel(),1===this._state&&this._firstWaitScheduler.cancel(),2===this._state&&(this._secondWaitScheduler.cancel(),this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null)),3===this._state&&this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null),this._state=0},s}();exports.HoverOperation=s;"},"sourceMaps":null,"error":null,"hash":"1ad365bc3e8075e5a397bf61dd1fa8a5","cacheData":{"env":{}}}