{"id":"C7Hm","dependencies":[{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/package.json","includedInParent":true,"mtime":1605999876337},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/.browserslistrc","includedInParent":true,"mtime":1605999876333},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/package.json","includedInParent":true,"mtime":1606000047237},{"name":"../../../../nls.js","loc":{"line":50,"column":21},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/nls.js"},{"name":"../../../../base/common/errors.js","loc":{"line":51,"column":34},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/errors.js"},{"name":"../../../../base/common/lifecycle.js","loc":{"line":52,"column":41},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/lifecycle.js"},{"name":"../../../browser/services/codeEditorService.js","loc":{"line":53,"column":35},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/services/codeEditorService.js"},{"name":"../../../../platform/instantiation/common/instantiation.js","loc":{"line":54,"column":38},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/platform/instantiation/common/instantiation.js"},{"name":"../../../../platform/contextkey/common/contextkey.js","loc":{"line":55,"column":66},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/platform/contextkey/common/contextkey.js"},{"name":"../../../../platform/configuration/common/configuration.js","loc":{"line":56,"column":38},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/platform/configuration/common/configuration.js"},{"name":"../../../../platform/storage/common/storage.js","loc":{"line":57,"column":32},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/platform/storage/common/storage.js"},{"name":"../referencesModel.js","loc":{"line":58,"column":29},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/referencesModel.js"},{"name":"./referencesWidget.js","loc":{"line":59,"column":44},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesWidget.js"},{"name":"../../../common/core/range.js","loc":{"line":60,"column":22},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/core/range.js"},{"name":"../../../common/core/position.js","loc":{"line":61,"column":25},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/core/position.js"},{"name":"../../../../platform/notification/common/notification.js","loc":{"line":62,"column":37},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/platform/notification/common/notification.js"},{"name":"../../../../base/common/async.js","loc":{"line":63,"column":40},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/async.js"},{"name":"../../peekView/peekView.js","loc":{"line":64,"column":44},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/peekView/peekView.js"},{"name":"../../../../platform/list/browser/listService.js","loc":{"line":65,"column":59},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/platform/list/browser/listService.js"},{"name":"../../../../platform/keybinding/common/keybindingsRegistry.js","loc":{"line":66,"column":36},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesController.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/platform/keybinding/common/keybindingsRegistry.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.ReferencesController=exports.ctxReferenceSearchVisible=void 0;var e=m(require(\"../../../../nls.js\")),t=require(\"../../../../base/common/errors.js\"),i=require(\"../../../../base/common/lifecycle.js\"),r=require(\"../../../browser/services/codeEditorService.js\"),o=require(\"../../../../platform/instantiation/common/instantiation.js\"),n=require(\"../../../../platform/contextkey/common/contextkey.js\"),s=require(\"../../../../platform/configuration/common/configuration.js\"),c=require(\"../../../../platform/storage/common/storage.js\"),d=require(\"../referencesModel.js\"),a=require(\"./referencesWidget.js\"),l=require(\"../../../common/core/range.js\"),u=require(\"../../../common/core/position.js\"),f=require(\"../../../../platform/notification/common/notification.js\"),g=require(\"../../../../base/common/async.js\"),h=require(\"../../peekView/peekView.js\"),p=require(\"../../../../platform/list/browser/listService.js\"),_=require(\"../../../../platform/keybinding/common/keybindingsRegistry.js\");function y(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return y=function(){return e},e}function m(e){if(e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var t=y();if(t&&t.has(e))return t.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var n=r?Object.getOwnPropertyDescriptor(e,o):null;n&&(n.get||n.set)?Object.defineProperty(i,o,n):i[o]=e[o]}return i.default=e,t&&t.set(e,i),i}var v=function(e,t,i,r){var o,n=arguments.length,s=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(s=(n<3?o(s):n>3?o(t,i,s):o(t,i))||s);return n>3&&s&&Object.defineProperty(t,i,s),s},b=function(e,t){return function(i,r){t(i,r,e)}},w=function(e,t,i,r){return new(i||(i=Promise))(function(o,n){function s(e){try{d(r.next(e))}catch(t){n(t)}}function c(e){try{d(r.throw(e))}catch(t){n(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,c)}d((r=r.apply(e,t||[])).next())})},R=function(e,t){var i,r,o,n,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return n={next:c(0),throw:c(1),return:c(2)},\"function\"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function c(n){return function(c){return function(n){if(i)throw new TypeError(\"Generator is already executing.\");for(;s;)try{if(i=1,r&&(o=2&n[0]?r.return:n[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,n[1])).done)return o;switch(r=0,o&&(n=[2&n[0],o.value]),n[0]){case 0:case 1:o=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){s.label=n[1];break}if(6===n[0]&&s.label<o[1]){s.label=o[1],o=n;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(n);break}o[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(c){n=[6,c],r=0}finally{i=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,c])}}},S=new n.RawContextKey(\"referenceSearchVisible\",!1);exports.ctxReferenceSearchVisible=S;var x=function(){function d(e,t,r,o,n,s,c,d){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=o,this._notificationService=n,this._instantiationService=s,this._storageService=c,this._configurationService=d,this._disposables=new i.DisposableStore,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=S.bindTo(r)}return d.get=function(e){return e.getContribution(d.ID)},d.prototype.dispose=function(){this._referenceSearchVisible.reset(),this._disposables.dispose(),(0,i.dispose)(this._widget),(0,i.dispose)(this._model),this._widget=void 0,this._model=void 0},d.prototype.toggleWidget=function(t,i,r){var o,n=this;if(this._widget&&(o=this._widget.position),this.closeWidget(),!o||!t.containsPosition(o)){this._peekMode=r,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(function(){n.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(function(){n._ignoreModelChangeEvent||n.closeWidget()}));var s=a.LayoutData.fromJSON(this._storageService.get(\"peekViewLayout\",0,\"{}\"));this._widget=this._instantiationService.createInstance(a.ReferenceWidget,this._editor,this._defaultTreeKeyboardSupport,s),this._widget.setTitle(e.localize(\"labelLoading\",\"Loading...\")),this._widget.show(t),this._disposables.add(this._widget.onDidClose(function(){i.cancel(),n._widget&&(n._storageService.store(\"peekViewLayout\",JSON.stringify(n._widget.layoutData),0),n._widget=void 0),n.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(function(e){var t=e.element,i=e.kind;if(t)switch(i){case\"open\":\"editor\"===e.source&&n._configurationService.getValue(\"editor.stablePeek\")||n.openReference(t,!1);break;case\"side\":n.openReference(t,!0);break;case\"goto\":r?n._gotoReference(t):n.openReference(t,!1)}}));var c=++this._requestIdPool;i.then(function(i){if(c===n._requestIdPool&&n._widget)return n._model&&n._model.dispose(),n._model=i,n._widget.setModel(n._model).then(function(){if(n._widget&&n._model&&n._editor.hasModel()){n._model.isEmpty?n._widget.setMetaTitle(\"\"):n._widget.setMetaTitle(e.localize(\"metaTitle.N\",\"{0} ({1})\",n._model.title,n._model.references.length));var i=n._editor.getModel().uri,r=new u.Position(t.startLineNumber,t.startColumn),o=n._model.nearestReference(i,r);if(o)return n._widget.setSelection(o)}})},function(e){n._notificationService.error(e)})}},d.prototype.goToNextOrPreviousReference=function(e){return w(this,void 0,void 0,function(){var t,i,r,o;return R(this,function(n){switch(n.label){case 0:return this._editor.hasModel()&&this._model&&this._widget&&((t=this._widget.position)&&(i=this._model.nearestReference(this._editor.getModel().uri,t)))?(r=this._model.nextOrPreviousReference(i,e),o=this._editor.hasTextFocus(),[4,this._widget.setSelection(r)]):[2];case 1:return n.sent(),[4,this._gotoReference(r)];case 2:return n.sent(),o&&this._editor.focus(),[2]}})})},d.prototype.closeWidget=function(){this._referenceSearchVisible.reset(),this._disposables.clear(),(0,i.dispose)(this._widget),(0,i.dispose)(this._model),this._widget=void 0,this._model=void 0,this._editor.focus(),this._requestIdPool+=1},d.prototype._gotoReference=function(e){var i=this;this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;var r=l.Range.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:r}},this._editor).then(function(e){var t;if(i._ignoreModelChangeEvent=!1,e&&i._widget)if(i._editor===e)i._widget.show(r),i._widget.focus();else{var o=d.get(e),n=i._model.clone();i.closeWidget(),e.focus(),o.toggleWidget(r,(0,g.createCancelablePromise)(function(e){return Promise.resolve(n)}),null!=(t=i._peekMode)&&t)}else i.closeWidget()},function(e){i._ignoreModelChangeEvent=!1,(0,t.onUnexpectedError)(e)})},d.prototype.openReference=function(e,t){t||this.closeWidget();var i=e.uri,r=e.range;this._editorService.openCodeEditor({resource:i,options:{selection:r}},this._editor,t)},d.ID=\"editor.contrib.referencesController\",d=v([b(2,n.IContextKeyService),b(3,r.ICodeEditorService),b(4,f.INotificationService),b(5,o.IInstantiationService),b(6,c.IStorageService),b(7,s.IConfigurationService)],d)}();function C(e,t){var i=(0,h.getOuterEditor)(e);if(i){var r=x.get(i);r&&t(r)}}exports.ReferencesController=x,_.KeybindingsRegistry.registerCommandAndKeybindingRule({id:\"goToNextReference\",weight:250,primary:62,secondary:[70],when:S,handler:function(e){C(e,function(e){e.goToNextOrPreviousReference(!0)})}}),_.KeybindingsRegistry.registerCommandAndKeybindingRule({id:\"goToNextReferenceFromEmbeddedEditor\",weight:150,primary:62,secondary:[70],when:h.PeekContext.inPeekEditor,handler:function(e){C(e,function(e){e.goToNextOrPreviousReference(!0)})}}),_.KeybindingsRegistry.registerCommandAndKeybindingRule({id:\"goToPreviousReference\",weight:250,primary:1086,secondary:[1094],when:S,handler:function(e){C(e,function(e){e.goToNextOrPreviousReference(!1)})}}),_.KeybindingsRegistry.registerCommandAndKeybindingRule({id:\"goToPreviousReferenceFromEmbeddedEditor\",weight:150,primary:1086,secondary:[1094],when:h.PeekContext.inPeekEditor,handler:function(e){C(e,function(e){e.goToNextOrPreviousReference(!1)})}}),_.KeybindingsRegistry.registerCommandAndKeybindingRule({id:\"closeReferenceSearch\",weight:250,primary:9,secondary:[1033],when:n.ContextKeyExpr.and(S,n.ContextKeyExpr.not(\"config.editor.stablePeek\")),handler:function(e){C(e,function(e){return e.closeWidget()})}}),_.KeybindingsRegistry.registerCommandAndKeybindingRule({id:\"closeReferenceSearchEditor\",weight:-1,primary:9,secondary:[1033],when:n.ContextKeyExpr.and(h.PeekContext.inPeekEditor,n.ContextKeyExpr.not(\"config.editor.stablePeek\")),handler:function(e){C(e,function(e){return e.closeWidget()})}}),_.KeybindingsRegistry.registerCommandAndKeybindingRule({id:\"openReferenceToSide\",weight:100,primary:2051,mac:{primary:259},when:n.ContextKeyExpr.and(S,p.WorkbenchListFocusContextKey),handler:function(e){var t,i=null===(t=e.get(p.IListService).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(i)&&i[0]instanceof d.OneReference&&C(e,function(e){return e.openReference(i[0],!0)})}});"},"sourceMaps":null,"error":null,"hash":"b131435a2a4cdc45531dfdb34e50b4f9","cacheData":{"env":{}}}