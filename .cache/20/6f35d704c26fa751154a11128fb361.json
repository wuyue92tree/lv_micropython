{"id":"i91A","dependencies":[{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/package.json","includedInParent":true,"mtime":1606037244039},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/.browserslistrc","includedInParent":true,"mtime":1606037244035},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/package.json","includedInParent":true,"mtime":1606037425866},{"name":"./goToDefinitionAtPosition.css","loc":{"line":14,"column":7},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition.css"},{"name":"../../../../nls.js","loc":{"line":15,"column":21},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/nls.js"},{"name":"../../../../base/common/async.js","loc":{"line":16,"column":40},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/async.js"},{"name":"../../../../base/common/errors.js","loc":{"line":17,"column":34},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/errors.js"},{"name":"../../../../base/common/htmlContent.js","loc":{"line":18,"column":31},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/htmlContent.js"},{"name":"../../../common/services/modeService.js","loc":{"line":19,"column":29},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/modeService.js"},{"name":"../../../common/core/range.js","loc":{"line":20,"column":22},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/core/range.js"},{"name":"../../../common/modes.js","loc":{"line":21,"column":43},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/modes.js"},{"name":"../../../browser/editorExtensions.js","loc":{"line":22,"column":43},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/editorExtensions.js"},{"name":"../goToSymbol.js","loc":{"line":23,"column":41},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/goToSymbol.js"},{"name":"../../../../base/common/lifecycle.js","loc":{"line":24,"column":32},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/lifecycle.js"},{"name":"../../../common/services/resolverService.js","loc":{"line":25,"column":34},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/services/resolverService.js"},{"name":"../../../../platform/theme/common/themeService.js","loc":{"line":26,"column":43},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/platform/theme/common/themeService.js"},{"name":"../../../../platform/theme/common/colorRegistry.js","loc":{"line":27,"column":43},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/platform/theme/common/colorRegistry.js"},{"name":"../../../browser/core/editorState.js","loc":{"line":28,"column":28},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/core/editorState.js"},{"name":"../goToCommands.js","loc":{"line":29,"column":33},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/goToCommands.js"},{"name":"./clickLinkGesture.js","loc":{"line":30,"column":33},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/clickLinkGesture.js"},{"name":"../../../common/core/position.js","loc":{"line":31,"column":25},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/core/position.js"},{"name":"../../../../base/common/types.js","loc":{"line":32,"column":36},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/types.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.GotoDefinitionAtPositionEditorContribution=void 0,require(\"./goToDefinitionAtPosition.css\");var e=b(require(\"../../../../nls.js\")),o=require(\"../../../../base/common/async.js\"),t=require(\"../../../../base/common/errors.js\"),i=require(\"../../../../base/common/htmlContent.js\"),n=require(\"../../../common/services/modeService.js\"),r=require(\"../../../common/core/range.js\"),s=require(\"../../../common/modes.js\"),a=require(\"../../../browser/editorExtensions.js\"),u=require(\"../goToSymbol.js\"),d=require(\"../../../../base/common/lifecycle.js\"),c=require(\"../../../common/services/resolverService.js\"),l=require(\"../../../../platform/theme/common/themeService.js\"),f=require(\"../../../../platform/theme/common/colorRegistry.js\"),h=require(\"../../../browser/core/editorState.js\"),p=require(\"../goToCommands.js\"),g=require(\"./clickLinkGesture.js\"),m=require(\"../../../common/core/position.js\"),v=require(\"../../../../base/common/types.js\");function P(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return P=function(){return e},e}function b(e){if(e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var o=P();if(o&&o.has(e))return o.get(e);var t={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=i?Object.getOwnPropertyDescriptor(e,n):null;r&&(r.get||r.set)?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,o&&o.set(e,t),t}var k=function(e,o,t,i){var n,r=arguments.length,s=r<3?o:null===i?i=Object.getOwnPropertyDescriptor(o,t):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(e,o,t,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(o,t,s):n(o,t))||s);return r>3&&s&&Object.defineProperty(o,t,s),s},D=function(e,o){return function(t,i){o(t,i,e)}},y=function(){function a(e,o,i){var n=this;this.textModelResolverService=o,this.modeService=i,this.toUnhook=new d.DisposableStore,this.toUnhookForKeyboard=new d.DisposableStore,this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e;var r=new g.ClickLinkGesture(e);this.toUnhook.add(r),this.toUnhook.add(r.onMouseMoveOrRelevantKeyDown(function(e){var o=e[0],t=e[1];n.startFindDefinitionFromMouse(o,(0,v.withNullAsUndefined)(t))})),this.toUnhook.add(r.onExecute(function(e){n.isEnabled(e)&&n.gotoDefinition(e.target.position,e.hasSideBySideModifier).then(function(){n.removeLinkDecorations()},function(e){n.removeLinkDecorations(),(0,t.onUnexpectedError)(e)})})),this.toUnhook.add(r.onCancel(function(){n.removeLinkDecorations(),n.currentWordAtPosition=null}))}return a.get=function(e){return e.getContribution(a.ID)},a.prototype.startFindDefinitionFromCursor=function(e){var o=this;return this.startFindDefinition(e).then(function(){o.toUnhookForKeyboard.add(o.editor.onDidChangeCursorPosition(function(){o.currentWordAtPosition=null,o.removeLinkDecorations(),o.toUnhookForKeyboard.clear()})),o.toUnhookForKeyboard.add(o.editor.onKeyDown(function(e){e&&(o.currentWordAtPosition=null,o.removeLinkDecorations(),o.toUnhookForKeyboard.clear())}))})},a.prototype.startFindDefinitionFromMouse=function(e,o){if(!(9===e.target.type&&this.linkDecorations.length>0)){if(!this.editor.hasModel()||!this.isEnabled(e,o))return this.currentWordAtPosition=null,void this.removeLinkDecorations();var t=e.target.position;this.startFindDefinition(t)}},a.prototype.startFindDefinition=function(n){var s,a=this;this.toUnhookForKeyboard.clear();var u=n?null===(s=this.editor.getModel())||void 0===s?void 0:s.getWordAtPosition(n):null;if(!u)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===u.startColumn&&this.currentWordAtPosition.endColumn===u.endColumn&&this.currentWordAtPosition.word===u.word)return Promise.resolve(0);this.currentWordAtPosition=u;var d=new h.EditorState(this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=(0,o.createCancelablePromise)(function(e){return a.findDefinition(n,e)}),this.previousPromise.then(function(o){if(o&&o.length&&d.validate(a.editor))if(o.length>1)a.addDecoration(new r.Range(n.lineNumber,u.startColumn,n.lineNumber,u.endColumn),(new i.MarkdownString).appendText(e.localize(\"multipleResults\",\"Click to show {0} definitions.\",o.length)));else{var t=o[0];if(!t.uri)return;a.textModelResolverService.createModelReference(t.uri).then(function(e){if(e.object&&e.object.textEditorModel){var o=e.object.textEditorModel,s=t.range.startLineNumber;if(s<1||s>o.getLineCount())e.dispose();else{var d,c=a.getPreviewValue(o,s,t);d=t.originSelectionRange?r.Range.lift(t.originSelectionRange):new r.Range(n.lineNumber,u.startColumn,n.lineNumber,u.endColumn);var l=a.modeService.getModeIdByFilepathOrFirstLine(o.uri);a.addDecoration(d,(new i.MarkdownString).appendCodeblock(l||\"\",c)),e.dispose()}}else e.dispose()})}else a.removeLinkDecorations()}).then(void 0,t.onUnexpectedError)},a.prototype.getPreviewValue=function(e,o,t){var i=t.targetSelectionRange?t.range:this.getPreviewRangeBasedOnBrackets(e,o);return i.endLineNumber-i.startLineNumber>=a.MAX_SOURCE_PREVIEW_LINES&&(i=this.getPreviewRangeBasedOnIndentation(e,o)),this.stripIndentationFromPreviewRange(e,o,i)},a.prototype.stripIndentationFromPreviewRange=function(e,o,t){for(var i=e.getLineFirstNonWhitespaceColumn(o),n=o+1;n<t.endLineNumber;n++){var r=e.getLineFirstNonWhitespaceColumn(n);i=Math.min(i,r)}return e.getValueInRange(t).replace(new RegExp(\"^\\\\s{\"+(i-1)+\"}\",\"gm\"),\"\").trim()},a.prototype.getPreviewRangeBasedOnIndentation=function(e,o){for(var t=e.getLineFirstNonWhitespaceColumn(o),i=Math.min(e.getLineCount(),o+a.MAX_SOURCE_PREVIEW_LINES),n=o+1;n<i;n++){if(t===e.getLineFirstNonWhitespaceColumn(n))break}return new r.Range(o,1,n+1,1)},a.prototype.getPreviewRangeBasedOnBrackets=function(e,o){for(var t=Math.min(e.getLineCount(),o+a.MAX_SOURCE_PREVIEW_LINES),i=[],n=!0,s=e.findNextBracket(new m.Position(o,1));null!==s;){if(0===i.length)i.push(s);else{var u=i[i.length-1];if(u.open[0]===s.open[0]&&u.isOpen&&!s.isOpen?i.pop():i.push(s),0===i.length){if(!n)return new r.Range(o,1,s.range.endLineNumber+1,1);n=!1}}var d=e.getLineMaxColumn(o),c=s.range.endLineNumber,l=s.range.endColumn;if(d===s.range.endColumn&&(c++,l=1),c>t)return new r.Range(o,1,t+1,1);s=e.findNextBracket(new m.Position(c,l))}return new r.Range(o,1,t+1,1)},a.prototype.addDecoration=function(e,o){var t={range:e,options:{inlineClassName:\"goto-definition-link\",hoverMessage:o}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[t])},a.prototype.removeLinkDecorations=function(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))},a.prototype.isEnabled=function(e,o){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&6===e.target.type&&(e.hasTriggerModifier||!!o&&o.keyCodeIsTriggerKey)&&s.DefinitionProviderRegistry.has(this.editor.getModel())},a.prototype.findDefinition=function(e,o){var t=this.editor.getModel();return t?(0,u.getDefinitionsAtPosition)(t,e,o):Promise.resolve(null)},a.prototype.gotoDefinition=function(e,o){var t=this;this.editor.setPosition(e);var i=new p.DefinitionAction({openToSide:o,openInPeek:!1,muteMessage:!0},{alias:\"\",label:\"\",id:\"\",precondition:void 0});return this.editor.invokeWithinContext(function(e){return i.run(e,t.editor)})},a.prototype.dispose=function(){this.toUnhook.dispose()},a.ID=\"editor.contrib.gotodefinitionatposition\",a.MAX_SOURCE_PREVIEW_LINES=8,a=k([D(1,c.ITextModelService),D(2,n.IModeService)],a)}();exports.GotoDefinitionAtPositionEditorContribution=y,(0,a.registerEditorContribution)(y.ID,y),(0,l.registerThemingParticipant)(function(e,o){var t=e.getColor(f.editorActiveLinkForeground);t&&o.addRule(\".monaco-editor .goto-definition-link { color: \"+t+\" !important; }\")});"},"sourceMaps":null,"error":null,"hash":"11185bf64094a32d5f9f5cc5e3940c82","cacheData":{"env":{}}}