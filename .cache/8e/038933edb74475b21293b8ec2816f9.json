{"id":"VYPe","dependencies":[{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/package.json","includedInParent":true,"mtime":1605994915815},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/.browserslistrc","includedInParent":true,"mtime":1605994915739},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/package.json","includedInParent":true,"mtime":1605995102295},{"name":"../../../base/common/strings.js","loc":{"line":5,"column":25},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/moveLinesCommand.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/strings.js"},{"name":"../../common/commands/shiftCommand.js","loc":{"line":6,"column":29},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/moveLinesCommand.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/commands/shiftCommand.js"},{"name":"../../common/core/range.js","loc":{"line":7,"column":22},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/moveLinesCommand.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/core/range.js"},{"name":"../../common/core/selection.js","loc":{"line":8,"column":26},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/moveLinesCommand.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/core/selection.js"},{"name":"../../common/modes/languageConfiguration.js","loc":{"line":9,"column":29},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/moveLinesCommand.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/modes/languageConfiguration.js"},{"name":"../../common/modes/languageConfigurationRegistry.js","loc":{"line":10,"column":46},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/moveLinesCommand.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/modes/languageConfigurationRegistry.js"},{"name":"../indentation/indentUtils.js","loc":{"line":11,"column":29},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/linesOperations/moveLinesCommand.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/contrib/indentation/indentUtils.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.MoveLinesCommand=void 0;var e=s(require(\"../../../base/common/strings.js\")),n=require(\"../../common/commands/shiftCommand.js\"),t=require(\"../../common/core/range.js\"),i=require(\"../../common/core/selection.js\"),o=require(\"../../common/modes/languageConfiguration.js\"),r=require(\"../../common/modes/languageConfigurationRegistry.js\"),a=s(require(\"../indentation/indentUtils.js\"));function u(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var n=u();if(n&&n.has(e))return n.get(e);var t={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var r=i?Object.getOwnPropertyDescriptor(e,o):null;r&&(r.get||r.set)?Object.defineProperty(t,o,r):t[o]=e[o]}return t.default=e,n&&n.set(e,t),t}var d=function(){function u(e,n,t){this._selection=e,this._isMovingDown=n,this._autoIndent=t,this._selectionId=null,this._moveEndLineSelectionShrink=!1}return u.prototype.getEditOperations=function(n,o){var u=n.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===u)this._selectionId=o.trackSelection(this._selection);else if(this._isMovingDown||1!==this._selection.startLineNumber){this._moveEndPositionDown=!1;var s=this._selection;s.startLineNumber<s.endLineNumber&&1===s.endColumn&&(this._moveEndPositionDown=!0,s=s.setEndPosition(s.endLineNumber-1,n.getLineMaxColumn(s.endLineNumber-1)));var d=n.getOptions(),g=d.tabSize,L=d.indentSize,l=d.insertSpaces,c=this.buildIndentConverter(g,L,l),m={getLineTokens:function(e){return n.getLineTokens(e)},getLanguageIdentifier:function(){return n.getLanguageIdentifier()},getLanguageIdAtPosition:function(e,t){return n.getLanguageIdAtPosition(e,t)},getLineContent:null};if(s.startLineNumber===s.endLineNumber&&1===n.getLineMaxColumn(s.startLineNumber)){var f=s.startLineNumber,h=this._isMovingDown?f+1:f-1;1===n.getLineMaxColumn(h)?o.addEditOperation(new t.Range(1,1,1,1),null):(o.addEditOperation(new t.Range(f,1,f,1),n.getLineContent(h)),o.addEditOperation(new t.Range(h,1,h,n.getLineMaxColumn(h)),null)),s=new i.Selection(h,1,h,1)}else{var p,C=void 0;if(this._isMovingDown){p=s.endLineNumber+1,C=n.getLineContent(p),o.addEditOperation(new t.Range(p-1,n.getLineMaxColumn(p-1),p,n.getLineMaxColumn(p)),null);var b=C;if(this.shouldAutoIndent(n,s)){var v=this.matchEnterRule(n,c,g,p,s.startLineNumber-1);if(null!==v){var I=e.getLeadingWhitespace(n.getLineContent(p)),N=v+a.getSpaceCnt(I,g),_=a.generateIndent(N,g,l);b=_+this.trimLeft(C)}else{m.getLineContent=function(e){return e===s.startLineNumber?n.getLineContent(p):n.getLineContent(e)};var E=r.LanguageConfigurationRegistry.getGoodIndentForLine(this._autoIndent,m,n.getLanguageIdAtPosition(p,1),s.startLineNumber,c);if(null!==E){I=e.getLeadingWhitespace(n.getLineContent(p));if((N=a.getSpaceCnt(E,g))!==(w=a.getSpaceCnt(I,g))){_=a.generateIndent(N,g,l);b=_+this.trimLeft(C)}}}if(o.addEditOperation(new t.Range(s.startLineNumber,1,s.startLineNumber,1),b+\"\\n\"),null!==(M=this.matchEnterRule(n,c,g,s.startLineNumber,s.startLineNumber,b)))0!==M&&this.getIndentEditsOfMovingBlock(n,o,s,g,l,M);else{m.getLineContent=function(e){return e===s.startLineNumber?b:e>=s.startLineNumber+1&&e<=s.endLineNumber+1?n.getLineContent(e-1):n.getLineContent(e)};var O=r.LanguageConfigurationRegistry.getGoodIndentForLine(this._autoIndent,m,n.getLanguageIdAtPosition(p,1),s.startLineNumber+1,c);if(null!==O){I=e.getLeadingWhitespace(n.getLineContent(s.startLineNumber));if((N=a.getSpaceCnt(O,g))!==(w=a.getSpaceCnt(I,g))){var S=N-w;this.getIndentEditsOfMovingBlock(n,o,s,g,l,S)}}}}else o.addEditOperation(new t.Range(s.startLineNumber,1,s.startLineNumber,1),b+\"\\n\")}else{var M;if(p=s.startLineNumber-1,C=n.getLineContent(p),o.addEditOperation(new t.Range(p,1,p+1,1),null),o.addEditOperation(new t.Range(s.endLineNumber,n.getLineMaxColumn(s.endLineNumber),s.endLineNumber,n.getLineMaxColumn(s.endLineNumber)),\"\\n\"+C),this.shouldAutoIndent(n,s))if(m.getLineContent=function(e){return e===p?n.getLineContent(s.startLineNumber):n.getLineContent(e)},null!==(M=this.matchEnterRule(n,c,g,s.startLineNumber,s.startLineNumber-2)))0!==M&&this.getIndentEditsOfMovingBlock(n,o,s,g,l,M);else{var y=r.LanguageConfigurationRegistry.getGoodIndentForLine(this._autoIndent,m,n.getLanguageIdAtPosition(s.startLineNumber,1),p,c);if(null!==y){var w,R=e.getLeadingWhitespace(n.getLineContent(s.startLineNumber));if((N=a.getSpaceCnt(y,g))!==(w=a.getSpaceCnt(R,g))){S=N-w;this.getIndentEditsOfMovingBlock(n,o,s,g,l,S)}}}}}this._selectionId=o.trackSelection(s)}else this._selectionId=o.trackSelection(this._selection)},u.prototype.buildIndentConverter=function(e,t,i){return{shiftIndent:function(o){return n.ShiftCommand.shiftIndent(o,o.length+1,e,t,i)},unshiftIndent:function(o){return n.ShiftCommand.unshiftIndent(o,o.length+1,e,t,i)}}},u.prototype.matchEnterRule=function(n,i,u,s,d,g){for(var L=d;L>=1;){var l=void 0;if(l=L===d&&void 0!==g?g:n.getLineContent(L),e.lastNonWhitespaceIndex(l)>=0)break;L--}if(L<1||s>n.getLineCount())return null;var c=n.getLineMaxColumn(L),m=r.LanguageConfigurationRegistry.getEnterAction(this._autoIndent,n,new t.Range(L,c,L,c));if(m){var f=m.indentation;m.indentAction===o.IndentAction.None?f=m.indentation+m.appendText:m.indentAction===o.IndentAction.Indent?f=m.indentation+m.appendText:m.indentAction===o.IndentAction.IndentOutdent?f=m.indentation:m.indentAction===o.IndentAction.Outdent&&(f=i.unshiftIndent(m.indentation)+m.appendText);var h=n.getLineContent(s);if(this.trimLeft(h).indexOf(this.trimLeft(f))>=0){var p=e.getLeadingWhitespace(n.getLineContent(s)),C=e.getLeadingWhitespace(f),b=r.LanguageConfigurationRegistry.getIndentMetadata(n,s);return null!==b&&2&b&&(C=i.unshiftIndent(C)),a.getSpaceCnt(C,u)-a.getSpaceCnt(p,u)}}return null},u.prototype.trimLeft=function(e){return e.replace(/^\\s+/,\"\")},u.prototype.shouldAutoIndent=function(e,n){if(this._autoIndent<4)return!1;if(!e.isCheapToTokenize(n.startLineNumber))return!1;var t=e.getLanguageIdAtPosition(n.startLineNumber,1);return t===e.getLanguageIdAtPosition(n.endLineNumber,1)&&null!==r.LanguageConfigurationRegistry.getIndentRulesSupport(t)},u.prototype.getIndentEditsOfMovingBlock=function(n,i,o,r,u,s){for(var d=o.startLineNumber;d<=o.endLineNumber;d++){var g=n.getLineContent(d),L=e.getLeadingWhitespace(g),l=a.getSpaceCnt(L,r)+s,c=a.generateIndent(l,r,u);c!==L&&(i.addEditOperation(new t.Range(d,1,d,L.length+1),c),d===o.endLineNumber&&o.endColumn<=L.length+1&&\"\"===c&&(this._moveEndLineSelectionShrink=!0))}},u.prototype.computeCursorState=function(e,n){var t=n.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(t=t.setEndPosition(t.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&t.startLineNumber<t.endLineNumber&&(t=t.setEndPosition(t.endLineNumber,2)),t},u}();exports.MoveLinesCommand=d;"},"sourceMaps":null,"error":null,"hash":"8545f5a439860635a659439e80965cde","cacheData":{"env":{}}}