{"id":"PwiJ","dependencies":[{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/package.json","includedInParent":true,"mtime":1605994484451},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/.browserslistrc","includedInParent":true,"mtime":1605994484387},{"name":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/package.json","includedInParent":true,"mtime":1605994671057},{"name":"./viewLines.css","loc":{"line":18,"column":7},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/lines/viewLines.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/lines/viewLines.css"},{"name":"../../../../base/common/async.js","loc":{"line":19,"column":33},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/lines/viewLines.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/base/common/async.js"},{"name":"../../config/configuration.js","loc":{"line":20,"column":30},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/lines/viewLines.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/config/configuration.js"},{"name":"../../view/viewLayer.js","loc":{"line":21,"column":39},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/lines/viewLines.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/view/viewLayer.js"},{"name":"../../view/viewPart.js","loc":{"line":22,"column":43},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/lines/viewLines.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/view/viewPart.js"},{"name":"./viewLine.js","loc":{"line":23,"column":61},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/lines/viewLines.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/lines/viewLine.js"},{"name":"../../../common/core/position.js","loc":{"line":24,"column":25},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/lines/viewLines.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/core/position.js"},{"name":"../../../common/core/range.js","loc":{"line":25,"column":22},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/lines/viewLines.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/core/range.js"},{"name":"../../../common/view/renderingContext.js","loc":{"line":26,"column":54},"parent":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/browser/viewParts/lines/viewLines.js","resolved":"/home/runner/work/lv_micropython/lv_micropython/ports/javascript/node_modules/monaco-editor/esm/vs/editor/common/view/renderingContext.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.ViewLines=void 0,require(\"./viewLines.css\");var e=require(\"../../../../base/common/async.js\"),t=require(\"../../config/configuration.js\"),i=require(\"../../view/viewLayer.js\"),n=require(\"../../view/viewPart.js\"),o=require(\"./viewLine.js\"),r=require(\"../../../common/core/position.js\"),s=require(\"../../../common/core/range.js\"),a=require(\"../../../common/view/renderingContext.js\"),l=function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),h=function(){function e(){this._currentVisibleRange=new s.Range(1,1,1,1)}return e.prototype.getCurrentVisibleRange=function(){return this._currentVisibleRange},e.prototype.setCurrentVisibleRange=function(e){this._currentVisibleRange=e},e}(),u=function(){return function(e,t,i,n,o,r){this.lineNumber=e,this.startColumn=t,this.endColumn=i,this.startScrollTop=n,this.stopScrollTop=o,this.scrollType=r}}(),c=function(c){function d(r,s){var a=c.call(this,r)||this;a._linesContent=s,a._textRangeRestingSpot=document.createElement(\"div\"),a._visibleLines=new i.VisibleLinesCollection(a),a.domNode=a._visibleLines.domNode;var l=a._context.configuration,u=a._context.configuration.options,d=u.get(32),g=u.get(104);return a._lineHeight=u.get(47),a._typicalHalfwidthCharacterWidth=d.typicalHalfwidthCharacterWidth,a._isViewportWrapping=g.isViewportWrapping,a._revealHorizontalRightPadding=u.get(71),a._cursorSurroundingLines=u.get(18),a._cursorSurroundingLinesStyle=u.get(19),a._canUseLayerHinting=!u.get(21),a._viewLineOptions=new o.ViewLineOptions(l,a._context.theme.type),n.PartFingerprints.write(a.domNode,7),a.domNode.setClassName(\"view-lines\"),t.Configuration.applyFontInfo(a.domNode,d),a._maxLineWidth=0,a._asyncUpdateLineWidths=new e.RunOnceScheduler(function(){a._updateLineWidthsSlow()},200),a._lastRenderedData=new h,a._horizontalRevealRequest=null,a}return l(d,c),d.prototype.dispose=function(){this._asyncUpdateLineWidths.dispose(),c.prototype.dispose.call(this)},d.prototype.getDomNode=function(){return this.domNode},d.prototype.createVisibleLine=function(){return new o.ViewLine(this._viewLineOptions)},d.prototype.onConfigurationChanged=function(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(104)&&(this._maxLineWidth=0);var i=this._context.configuration.options,n=i.get(32),o=i.get(104);return this._lineHeight=i.get(47),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=o.isViewportWrapping,this._revealHorizontalRightPadding=i.get(71),this._cursorSurroundingLines=i.get(18),this._cursorSurroundingLinesStyle=i.get(19),this._canUseLayerHinting=!i.get(21),t.Configuration.applyFontInfo(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(103)&&(this._maxLineWidth=0),!0},d.prototype._onOptionsMaybeChanged=function(){var e=this._context.configuration,t=new o.ViewLineOptions(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;for(var i=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber(),r=i;r<=n;r++){this._visibleLines.getVisibleLine(r).onOptionsChanged(this._viewLineOptions)}return!0}return!1},d.prototype.onCursorStateChanged=function(e){for(var t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),n=!1,o=t;o<=i;o++)n=this._visibleLines.getVisibleLine(o).onSelectionChanged()||n;return n},d.prototype.onDecorationsChanged=function(e){for(var t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),n=t;n<=i;n++)this._visibleLines.getVisibleLine(n).onDecorationsChanged();return!0},d.prototype.onFlushed=function(e){var t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t},d.prototype.onLinesChanged=function(e){return this._visibleLines.onLinesChanged(e)},d.prototype.onLinesDeleted=function(e){return this._visibleLines.onLinesDeleted(e)},d.prototype.onLinesInserted=function(e){return this._visibleLines.onLinesInserted(e)},d.prototype.onRevealRangeRequest=function(e){var t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.range,e.verticalType),i=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range.startLineNumber!==e.range.endLineNumber?i={scrollTop:i.scrollTop,scrollLeft:0}:this._horizontalRevealRequest=new u(e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),i.scrollTop,e.scrollType):this._horizontalRevealRequest=null;var n=Math.abs(this._context.viewLayout.getCurrentScrollTop()-i.scrollTop);return 0===e.scrollType&&n>this._lineHeight?this._context.viewLayout.setScrollPositionSmooth(i):this._context.viewLayout.setScrollPositionNow(i),!0},d.prototype.onScrollChanged=function(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){var t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),i=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>i)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0},d.prototype.onTokensChanged=function(e){return this._visibleLines.onTokensChanged(e)},d.prototype.onZonesChanged=function(e){return this._context.viewLayout.onMaxLineWidthChanged(this._maxLineWidth),this._visibleLines.onZonesChanged(e)},d.prototype.onThemeChanged=function(e){return this._onOptionsMaybeChanged()},d.prototype.getPositionFromDOMInfo=function(e,t){var i=this._getViewLineDomNode(e);if(null===i)return null;var n=this._getLineNumberFor(i);if(-1===n)return null;if(n<1||n>this._context.model.getLineCount())return null;if(1===this._context.model.getLineMaxColumn(n))return new r.Position(n,1);var o=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();if(n<o||n>s)return null;var a=this._visibleLines.getVisibleLine(n).getColumnOfNodeOffset(n,e,t),l=this._context.model.getLineMinColumn(n);return a<l&&(a=l),new r.Position(n,a)},d.prototype._getViewLineDomNode=function(e){for(;e&&1===e.nodeType;){if(e.className===o.ViewLine.CLASS_NAME)return e;e=e.parentElement}return null},d.prototype._getLineNumberFor=function(e){for(var t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),n=t;n<=i;n++){if(e===this._visibleLines.getVisibleLine(n).getDomNode())return n}return-1},d.prototype.getLineWidth=function(e){var t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();return e<t||e>i?-1:this._visibleLines.getVisibleLine(e).getWidth()},d.prototype.linesVisibleRangesForRange=function(e,t){if(this.shouldRender())return null;var i=e.endLineNumber,n=s.Range.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!n)return null;var l=[],h=0,u=new o.DomReadingContext(this.domNode.domNode,this._textRangeRestingSpot),c=0;t&&(c=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new r.Position(n.startLineNumber,1)).lineNumber);for(var d=this._visibleLines.getStartLineNumber(),g=this._visibleLines.getEndLineNumber(),p=n.startLineNumber;p<=n.endLineNumber;p++)if(!(p<d||p>g)){var L=p===n.startLineNumber?n.startColumn:1,_=p===n.endLineNumber?n.endColumn:this._context.model.getLineMaxColumn(p),v=this._visibleLines.getVisibleLine(p).getVisibleRangesForRange(L,_,u);if(v){if(t&&p<i)c!==(c=this._context.model.coordinatesConverter.convertViewPositionToModelPosition(new r.Position(p+1,1)).lineNumber)&&(v.ranges[v.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth);l[h++]=new a.LineVisibleRanges(v.outsideRenderedLine,p,v.ranges)}}return 0===h?null:l},d.prototype._visibleRangesForLineRange=function(e,t,i){return this.shouldRender()?null:e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber()?null:this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(t,i,new o.DomReadingContext(this.domNode.domNode,this._textRangeRestingSpot))},d.prototype.visibleRangeForPosition=function(e){var t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new a.HorizontalPosition(t.outsideRenderedLine,t.ranges[0].left):null},d.prototype.updateLineWidths=function(){this._updateLineWidths(!1)},d.prototype._updateLineWidthsFast=function(){return this._updateLineWidths(!0)},d.prototype._updateLineWidthsSlow=function(){this._updateLineWidths(!1)},d.prototype._updateLineWidths=function(e){for(var t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),n=1,o=!0,r=t;r<=i;r++){var s=this._visibleLines.getVisibleLine(r);!e||s.getWidthIsFast()?n=Math.max(n,s.getWidth()):o=!1}return o&&1===t&&i===this._context.model.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(n),o},d.prototype.prepareRender=function(){throw new Error(\"Not supported\")},d.prototype.render=function(){throw new Error(\"Not supported\")},d.prototype.renderText=function(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){var t=this._horizontalRevealRequest.lineNumber,i=this._horizontalRevealRequest.startColumn,n=this._horizontalRevealRequest.endColumn,o=this._horizontalRevealRequest.scrollType;if(e.startLineNumber<=t&&t<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();var r=this._computeScrollLeftToRevealRange(t,i,n);this._isViewportWrapping||this._ensureMaxLineWidth(r.maxHorizontalOffset),0===o?this._context.viewLayout.setScrollPositionSmooth({scrollLeft:r.scrollLeft}):this._context.viewLayout.setScrollPositionNow({scrollLeft:r.scrollLeft})}}this._updateLineWidthsFast()||this._asyncUpdateLineWidths.schedule(),this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain(\"strict\");var s=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-s),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())},d.prototype._ensureMaxLineWidth=function(e){var t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewLayout.onMaxLineWidthChanged(this._maxLineWidth))},d.prototype._computeScrollTopToRevealRange=function(e,t,i,n){var o,r,s,a=e.top,l=e.height,h=a+l;if(o=this._context.viewLayout.getVerticalOffsetForLineNumber(i.startLineNumber),r=this._context.viewLayout.getVerticalOffsetForLineNumber(i.endLineNumber)+this._lineHeight,!(\"mouse\"===t&&\"default\"===this._cursorSurroundingLinesStyle)){var u=Math.min(l/this._lineHeight/2,this._cursorSurroundingLines);o-=u*this._lineHeight,r+=Math.max(0,u-1)*this._lineHeight}if(0!==n&&4!==n||(r+=this._lineHeight),r-o>l)s=o;else if(1===n||2===n)if(2===n&&a<=o&&r<=h)s=a;else{var c=(o+r)/2;s=Math.max(0,c-l/2)}else s=this._computeMinimumScrolling(a,h,o,r,3===n,4===n);return s},d.prototype._computeScrollLeftToRevealRange=function(e,t,i){var n=0,o=this._context.viewLayout.getCurrentViewport(),r=o.left,s=r+o.width,a=this._visibleRangesForLineRange(e,t,i),l=1073741824,h=0;if(!a)return{scrollLeft:r,maxHorizontalOffset:n};for(var u=0,c=a.ranges;u<c.length;u++){var g=c[u];g.left<l&&(l=g.left),g.left+g.width>h&&(h=g.left+g.width)}return n=h,l=Math.max(0,l-d.HORIZONTAL_EXTRA_PX),h+=this._revealHorizontalRightPadding,{scrollLeft:this._computeMinimumScrolling(r,s,l,h),maxHorizontalOffset:n}},d.prototype._computeMinimumScrolling=function(e,t,i,n,o,r){o=!!o,r=!!r;var s=(t|=0)-(e|=0);return(n|=0)-(i|=0)<s?o?i:r?Math.max(0,n-s):i<e?i:n>t?Math.max(0,n-s):e:i},d.HORIZONTAL_EXTRA_PX=30,d}(n.ViewPart);exports.ViewLines=c;"},"sourceMaps":null,"error":null,"hash":"a84b72b59f61e20fa5b61a5e2dfde43f","cacheData":{"env":{}}}